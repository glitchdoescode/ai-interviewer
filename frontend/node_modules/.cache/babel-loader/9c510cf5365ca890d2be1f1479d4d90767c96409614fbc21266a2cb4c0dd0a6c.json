{"ast":null,"code":"import React,{useEffect,useRef}from'react';import{Box,Flex,Text,Avatar,useColorModeValue,Badge,Button}from'@chakra-ui/react';import{FaPlay,FaStop}from'react-icons/fa';/**\n * Component for displaying a single chat message\n * @param {Object} props - Component props\n * @param {string} props.message - Message content\n * @param {string} props.sender - Message sender ('user' or 'assistant')\n * @param {boolean} props.isLoading - Whether the message is in loading state\n * @param {string} props.audioUrl - Optional URL for audio message\n * @param {boolean} props.isHint - Whether this message is a hint\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatMessage=_ref=>{let{message,sender,isLoading=false,audioUrl,isHint=false}=_ref;const isUser=sender==='user';const audioRef=useRef(null);const[isPlaying,setIsPlaying]=React.useState(false);const[audioError,setAudioError]=React.useState(null);const bgColor=useColorModeValue(isUser?'blue.50':isHint?'purple.50':'gray.50',isUser?'blue.900':isHint?'purple.900':'gray.700');const textColor=useColorModeValue(isUser?'blue.800':isHint?'purple.800':'gray.800',isUser?'blue.100':isHint?'purple.100':'gray.100');// Loading animation styles\nconst loadingStyle=isLoading?{position:'relative',overflow:'hidden','&:after':{content:'\"\"',position:'absolute',bottom:0,left:0,height:'2px',width:'30%',animation:'loading 1.5s infinite',background:'brand.500'},'@keyframes loading':{'0%':{left:'0%',width:'30%'},'50%':{left:'70%',width:'30%'},'100%':{left:'0%',width:'30%'}}}:{};// Handle audio play/pause\nconst toggleAudio=()=>{if(!audioRef.current)return;if(isPlaying){audioRef.current.pause();}else{// Clear any previous errors\nsetAudioError(null);// Try to play the audio\naudioRef.current.play().catch(err=>{console.error('Error playing audio:',err);setAudioError('Could not play audio. Please click the play button.');});}};// Update isPlaying state based on audio events\nuseEffect(()=>{const audioElement=audioRef.current;if(!audioElement)return;const handlePlay=()=>setIsPlaying(true);const handlePause=()=>setIsPlaying(false);const handleEnded=()=>setIsPlaying(false);const handleError=e=>{console.error('Audio playback error:',e);setIsPlaying(false);setAudioError('Error playing audio. Please try again.');};audioElement.addEventListener('play',handlePlay);audioElement.addEventListener('pause',handlePause);audioElement.addEventListener('ended',handleEnded);audioElement.addEventListener('error',handleError);return()=>{audioElement.removeEventListener('play',handlePlay);audioElement.removeEventListener('pause',handlePause);audioElement.removeEventListener('ended',handleEnded);audioElement.removeEventListener('error',handleError);};},[]);return/*#__PURE__*/_jsxs(Flex,{width:\"100%\",justify:isUser?'flex-end':'flex-start',mb:4,children:[!isUser&&/*#__PURE__*/_jsx(Avatar,{size:\"sm\",name:\"AI Interviewer\",bg:isHint?\"purple.500\":\"brand.500\",color:\"white\",mr:2}),/*#__PURE__*/_jsxs(Box,{maxW:{base:'90%',md:'70%'},p:3,borderRadius:\"lg\",bg:bgColor,color:textColor,boxShadow:\"sm\",sx:loadingStyle,children:[isHint&&/*#__PURE__*/_jsx(Badge,{colorScheme:\"purple\",mb:2,children:\"Hint\"}),/*#__PURE__*/_jsx(Text,{whiteSpace:\"pre-wrap\",children:message}),audioUrl&&/*#__PURE__*/_jsxs(Box,{mt:2,children:[/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,src:audioUrl,style:{display:'none'},preload:\"auto\"}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Button,{leftIcon:isPlaying?/*#__PURE__*/_jsx(FaStop,{}):/*#__PURE__*/_jsx(FaPlay,{}),size:\"sm\",colorScheme:isPlaying?\"red\":\"blue\",onClick:toggleAudio,mr:2,children:isPlaying?\"Stop\":\"Play Response\"}),audioError&&/*#__PURE__*/_jsx(Text,{color:\"red.500\",fontSize:\"sm\",children:audioError})]})]})]}),isUser&&/*#__PURE__*/_jsx(Avatar,{size:\"sm\",ml:2,name:\"User\",bg:\"blue.500\"})]});};export default ChatMessage;","map":{"version":3,"names":["React","useEffect","useRef","Box","Flex","Text","Avatar","useColorModeValue","Badge","Button","FaPlay","FaStop","jsx","_jsx","jsxs","_jsxs","ChatMessage","_ref","message","sender","isLoading","audioUrl","isHint","isUser","audioRef","isPlaying","setIsPlaying","useState","audioError","setAudioError","bgColor","textColor","loadingStyle","position","overflow","content","bottom","left","height","width","animation","background","toggleAudio","current","pause","play","catch","err","console","error","audioElement","handlePlay","handlePause","handleEnded","handleError","e","addEventListener","removeEventListener","justify","mb","children","size","name","bg","color","mr","maxW","base","md","p","borderRadius","boxShadow","sx","colorScheme","whiteSpace","mt","ref","src","style","display","preload","alignItems","leftIcon","onClick","fontSize","ml"],"sources":["/home/glitch/Documents/ai-interviewer/frontend/src/components/ChatMessage.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { Box, Flex, Text, Avatar, useColorModeValue, Badge, Button } from '@chakra-ui/react';\nimport { FaPlay, FaStop } from 'react-icons/fa';\n\n/**\n * Component for displaying a single chat message\n * @param {Object} props - Component props\n * @param {string} props.message - Message content\n * @param {string} props.sender - Message sender ('user' or 'assistant')\n * @param {boolean} props.isLoading - Whether the message is in loading state\n * @param {string} props.audioUrl - Optional URL for audio message\n * @param {boolean} props.isHint - Whether this message is a hint\n */\nconst ChatMessage = ({ message, sender, isLoading = false, audioUrl, isHint = false }) => {\n  const isUser = sender === 'user';\n  const audioRef = useRef(null);\n  const [isPlaying, setIsPlaying] = React.useState(false);\n  const [audioError, setAudioError] = React.useState(null);\n\n  const bgColor = useColorModeValue(\n    isUser ? 'blue.50' : isHint ? 'purple.50' : 'gray.50',\n    isUser ? 'blue.900' : isHint ? 'purple.900' : 'gray.700'\n  );\n  const textColor = useColorModeValue(\n    isUser ? 'blue.800' : isHint ? 'purple.800' : 'gray.800',\n    isUser ? 'blue.100' : isHint ? 'purple.100' : 'gray.100'\n  );\n\n  // Loading animation styles\n  const loadingStyle = isLoading\n    ? {\n        position: 'relative',\n        overflow: 'hidden',\n        '&:after': {\n          content: '\"\"',\n          position: 'absolute',\n          bottom: 0,\n          left: 0,\n          height: '2px',\n          width: '30%',\n          animation: 'loading 1.5s infinite',\n          background: 'brand.500',\n        },\n        '@keyframes loading': {\n          '0%': { left: '0%', width: '30%' },\n          '50%': { left: '70%', width: '30%' },\n          '100%': { left: '0%', width: '30%' },\n        },\n      }\n    : {};\n\n  // Handle audio play/pause\n  const toggleAudio = () => {\n    if (!audioRef.current) return;\n    \n    if (isPlaying) {\n      audioRef.current.pause();\n    } else {\n      // Clear any previous errors\n      setAudioError(null);\n      \n      // Try to play the audio\n      audioRef.current.play().catch(err => {\n        console.error('Error playing audio:', err);\n        setAudioError('Could not play audio. Please click the play button.');\n      });\n    }\n  };\n\n  // Update isPlaying state based on audio events\n  useEffect(() => {\n    const audioElement = audioRef.current;\n    if (!audioElement) return;\n\n    const handlePlay = () => setIsPlaying(true);\n    const handlePause = () => setIsPlaying(false);\n    const handleEnded = () => setIsPlaying(false);\n    const handleError = (e) => {\n      console.error('Audio playback error:', e);\n      setIsPlaying(false);\n      setAudioError('Error playing audio. Please try again.');\n    };\n\n    audioElement.addEventListener('play', handlePlay);\n    audioElement.addEventListener('pause', handlePause);\n    audioElement.addEventListener('ended', handleEnded);\n    audioElement.addEventListener('error', handleError);\n\n    return () => {\n      audioElement.removeEventListener('play', handlePlay);\n      audioElement.removeEventListener('pause', handlePause);\n      audioElement.removeEventListener('ended', handleEnded);\n      audioElement.removeEventListener('error', handleError);\n    };\n  }, []);\n\n  return (\n    <Flex\n      width=\"100%\"\n      justify={isUser ? 'flex-end' : 'flex-start'}\n      mb={4}\n    >\n      {!isUser && (\n        <Avatar \n          size=\"sm\" \n          name=\"AI Interviewer\" \n          bg={isHint ? \"purple.500\" : \"brand.500\"} \n          color=\"white\" \n          mr={2} \n        />\n      )}\n      \n      <Box\n        maxW={{ base: '90%', md: '70%' }}\n        p={3}\n        borderRadius=\"lg\"\n        bg={bgColor}\n        color={textColor}\n        boxShadow=\"sm\"\n        sx={loadingStyle}\n      >\n        {isHint && (\n          <Badge colorScheme=\"purple\" mb={2}>Hint</Badge>\n        )}\n        \n        <Text whiteSpace=\"pre-wrap\">{message}</Text>\n        \n        {audioUrl && (\n          <Box mt={2}>\n            <audio \n              ref={audioRef} \n              src={audioUrl} \n              style={{ display: 'none' }}\n              preload=\"auto\"\n            />\n            <Flex alignItems=\"center\">\n              <Button \n                leftIcon={isPlaying ? <FaStop /> : <FaPlay />}\n                size=\"sm\"\n                colorScheme={isPlaying ? \"red\" : \"blue\"}\n                onClick={toggleAudio}\n                mr={2}\n              >\n                {isPlaying ? \"Stop\" : \"Play Response\"}\n              </Button>\n              {audioError && (\n                <Text color=\"red.500\" fontSize=\"sm\">{audioError}</Text>\n              )}\n            </Flex>\n          </Box>\n        )}\n      </Box>\n      \n      {isUser && (\n        <Avatar \n          size=\"sm\" \n          ml={2} \n          name=\"User\" \n          bg=\"blue.500\"\n        />\n      )}\n    </Flex>\n  );\n};\n\nexport default ChatMessage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}